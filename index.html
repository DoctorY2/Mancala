<script>
const aiBoard = document.getElementById("aiBoard");
const humanBoard = document.getElementById("humanBoard");
const humanScore = document.getElementById("humanScore");
const aiScore = document.getElementById("aiScore");
const turnText = document.getElementById("turnText");
const humanMancala = document.getElementById("humanMancala");
const aiMancala = document.getElementById("aiMancala");

let board = Array(12).fill(4);
let scores = { human: 0, ai: 0 };
let current = "human";

function render() {
  aiBoard.innerHTML = "";
  humanBoard.innerHTML = "";

  for (let i = 5; i >= 0; i--) aiBoard.appendChild(pit(i));
  for (let i = 6; i < 12; i++) humanBoard.appendChild(pit(i));

  humanScore.textContent = scores.human;
  aiScore.textContent = scores.ai;
  humanMancala.textContent = scores.human;
  aiMancala.textContent = scores.ai;
  turnText.textContent = current === "human" ? "Tu turno" : "Turno IA";
}

function pit(i) {
  const el = document.createElement("div");
  el.className = "pit";
  el.textContent = board[i];

  if (current === "human" && i >= 6 && board[i] > 0) {
    el.onclick = () => move(i);
  } else {
    el.classList.add("disabled");
  }

  return el;
}

function move(i) {
  let stones = board[i];
  board[i] = 0;
  let index = i;

  while (stones > 0) {
    index = (index + 1) % 12;
    board[index]++;
    stones--;
  }

  current = current === "human" ? "ai" : "human";
  render();

  if (current === "ai") {
    setTimeout(aiMove, 600);
  }
}

function aiMove() {
  for (let i = 0; i < 6; i++) {
    if (board[i] > 0) {
      move(i);
      break;
    }
  }
}

render();
</script>
