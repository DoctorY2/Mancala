<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gebeta</title>

  <!-- Farcaster Frame -->
  <meta property="fc:frame" content="vNext">
  <meta property="fc:frame:image" content="https://picsum.photos/600/400">
  <meta property="fc:frame:button:1" content="Jugar">

  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #2c1c12;
      color: #fff;
      display: flex;
      justify-content: center;
      height: 100vh; /* Asegura que el body ocupe toda la altura */
      align-items: center; /* Centrado vertical */
    }

    .app {
      width: 100%;
      max-width: 420px;
      padding: 16px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    h1 {
      text-align: center;
      margin: 6px 0;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(6, 1fr); /* Coloca 6 casillas por fila */
      gap: 8px;
      margin: 12px 0;
      width: 100%;
      justify-content: center; /* Centra los elementos dentro del grid */
    }

    .pit {
      background: #6b3f2a;
      border-radius: 50%;
      height: 54px;
      width: 54px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      cursor: pointer;
    }

    .pit.disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .score, .turn {
      text-align: center;
      margin-top: 6px;
    }

    #turnText {
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div class="app">
    <h1>Gebeta</h1>

    <div class="score">
      ðŸ¤– IA: <span id="aiScore">0</span> |
      ðŸ§‘ TÃº: <span id="humanScore">0</span>
    </div>

    <div class="board" id="aiBoard"></div> <!-- Tablero IA -->
    <div class="board" id="humanBoard"></div> <!-- Tablero Humano -->

    <div class="turn" id="turnText">Tu turno</div>
  </div>

  <script>
    const aiBoard = document.getElementById("aiBoard");
    const humanBoard = document.getElementById("humanBoard");
    const humanScore = document.getElementById("humanScore");
    const aiScore = document.getElementById("aiScore");
    const turnText = document.getElementById("turnText");

    let board = Array(12).fill(4);
    let scores = { human: 0, ai: 0 };
    let current = "human";

    // FunciÃ³n para renderizar el tablero
    function render() {
      aiBoard.innerHTML = "";
      humanBoard.innerHTML = "";

      // Renderizar el tablero de la IA (primer fila)
      for (let i = 5; i >= 0; i--) aiBoard.appendChild(pit(i));

      // Renderizar el tablero del jugador humano (segunda fila)
      for (let i = 6; i < 12; i++) humanBoard.appendChild(pit(i));

      humanScore.textContent = scores.human;
      aiScore.textContent = scores.ai;
      turnText.textContent = current === "human" ? "Tu turno" : "Turno IA";
    }

    // FunciÃ³n para crear las casillas del tablero
    function pit(i) {
      const pitElement = document.createElement("div");
      pitElement.classList.add("pit");
      pitElement.textContent = board[i];

      // Si es el turno del jugador humano y la casilla no estÃ¡ vacÃ­a, habilitarla para hacer clic
      if (current === "human" && i >= 6) {
        pitElement.classList.remove("disabled");
        pitElement.onclick = () => humanMove(i);
      } else {
        pitElement.classList.add("disabled");
      }

      return pitElement;
    }

    // Movimiento del jugador humano
    function humanMove(i) {
      const stones = board[i];
      board[i] = 0;
      let index = i;

      // Distribuir las piedras en sentido antihorario
      while (stones > 0) {
        index = (index + 1) % 12;
        if (index === 6) continue; // El mancala del jugador no recibe piedras
        board[index]++;
        stones--;
      }

      scores.human += board[6];
      scores.ai += board[12];

      current = "ai"; // Cambio de turno a la IA
      render();

      if (checkWinner()) return; // Comprobar si el juego ha terminado
      aiMove(); // Hacer el movimiento de la IA despuÃ©s de que el jugador humano termine
    }

    // Movimiento de la IA
    function aiMove() {
      let moveMade = false;
